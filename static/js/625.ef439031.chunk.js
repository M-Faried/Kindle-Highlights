"use strict";(self.webpackChunkkindle_highlights=self.webpackChunkkindle_highlights||[]).push([[625],{8625:function(e,n,s){s.r(n),s.d(n,{default:function(){return S}});var i=s(885),t=s(7313),a=s(6417),c=function(e){var n=e.setFilter,s=e.clearFilter,i=e.filterText,c=e.placeholder,l=(0,t.createRef)();return(0,a.jsxs)("div",{className:"search-box",children:[(0,a.jsx)("input",{type:"text",ref:l,onChange:function(e){e.target.value&&""!==e.target.value?n(e.target.value):s()},placeholder:c,value:i}),(0,a.jsx)("button",{onClick:function(){l.current.value="",s()},children:(0,a.jsx)("i",{className:"fas fa-backspace"})})]})},l=s(5566),r=s.n(l),o=s(6310),d=function(e){var n=e.clip,s=e.gridLayout,i=e.number,t=e.handle,c=(0,o.ZP)(),l=c.selectedTitle,d=c.setSelectedClipping,h=c.filterClippingsText;return(0,a.jsxs)("div",{className:s?"kc-card shadow-sm":"kc-card-ext shadow-sm",onClick:function(){return d(n)},ref:t,children:[(0,a.jsx)("p",{children:h?(0,a.jsx)(r(),{highlightClassName:"search-highlight",searchWords:[h],autoEscape:!0,textToHighlight:n.body}):n.body}),l.bookmark===n._id&&(0,a.jsx)("div",{className:"kc-card-bookmark",children:(0,a.jsx)("i",{className:"fas fa-bookmark"})}),(0,a.jsx)("div",{className:"kc-card-number",children:i})]})},h=s(8683),u=30,x={itemsCount:0,pageIndex:0,pageCount:0,startIndex:0,endIndex:0},m=(0,t.createContext)(),f=function(e){var n=(0,t.useState)(x),s=(0,i.Z)(n,2),c=s[0],l=s[1],r=function(){return c.endIndex<c.itemsCount},o=function(){return c.startIndex>=u},d=(0,h.Z)((0,h.Z)({},c),{},{initPaginationState:function(e){l((function(n){return(0,h.Z)((0,h.Z)({},n),{},{itemsCount:e,pageCount:e>0?Math.ceil(e/u):1,pageIndex:0,startIndex:0,endIndex:u})}))},canMoveNext:r,canMovePrev:o,moveNextPage:function(){r()&&l((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pageIndex:e.pageIndex+1,startIndex:(e.pageIndex+1)*u,endIndex:(e.pageIndex+1+1)*u})}))},movePrevPage:function(){o()&&l((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pageIndex:e.pageIndex-1,startIndex:(e.pageIndex-1)*u,endIndex:(e.pageIndex-1+1)*u})}))},moveToItemsPage:function(e){var n=Math.floor(e/u);l((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pageIndex:n,startIndex:n*u,endIndex:(n+1)*u})}))}});return(0,a.jsx)(m.Provider,{value:d,children:e.children})},g=function(){return(0,t.useContext)(m)},p=function(){var e=(0,t.useContext)(m),n=e.pageIndex,s=e.pageCount,i=e.moveNextPage,c=e.movePrevPage,l=e.canMoveNext,r=e.canMovePrev;return(0,a.jsxs)("div",{className:"page-counter-container my-5",children:[(0,a.jsx)("button",{className:"page-counter-btn",onClick:c,disabled:!r(),children:(0,a.jsx)("i",{className:"fas fa-chevron-left",children:" "})}),(0,a.jsx)("span",{children:"Page ".concat(n+1," / ").concat(s)}),(0,a.jsx)("button",{className:"page-counter-btn",onClick:i,disabled:!l(),children:(0,a.jsx)("i",{className:"fas fa-chevron-right",children:" "})})]})},j=function(){var e=(0,o.ZP)(),n=e.selectedTitle,s=e.filteredClippings,l=e.filterClippingsText,r=e.setClippingsFilter,h=e.clearClippingsFilter,u=g(),x=u.startIndex,m=u.endIndex,f=u.pageCount,j=u.pageIndex,v=u.initPaginationState,k=u.moveToItemsPage,b=(0,t.useState)(!1),N=(0,i.Z)(b,2),C=N[0],I=N[1];(0,t.useEffect)((function(){var e=s?s.length:n?n.clippings.length:0;v(e)}),[n,s]),(0,t.useEffect)((function(){y.current&&setTimeout((function(){y.current.scrollIntoView({behavior:"smooth",block:"start"})}),50)}),[j]);var T=(0,t.useRef)(null),y=(0,t.useRef)(null);if(!n)return(0,a.jsx)("div",{className:"clippings",children:(0,a.jsx)("h1",{style:{marginTop:"70px",marginLeft:"50px",color:"var(--main-section-font-color)"},children:"Please select a title."})});var Z=null;Z=s?s.slice(x,m).map((function(e){return(0,a.jsx)(d,{gridLayout:C,clip:e,number:e.index+1,handle:n.bookmark===e._id?T:null},e._id)})):n.clippings.slice(x,m).map((function(e){return(0,a.jsx)(d,{gridLayout:C,clip:e,number:e.index+1,handle:n.bookmark===e._id?T:null},e._id)}));return(0,a.jsxs)("div",{className:"clippings",children:[(0,a.jsxs)("div",{className:"view-toggle shadow-sm",children:[(0,a.jsx)("a",{href:"#!",onClick:function(){return I(!0)},className:C?"selected":"",children:(0,a.jsx)("i",{className:"fas fa-th-large"})}),(0,a.jsx)("a",{href:"#!",onClick:function(){return I(!1)},className:C?"":"selected",children:(0,a.jsx)("i",{className:"fas fa-bars"})})]}),(0,a.jsx)("div",{className:"title-container ballo-font",ref:y,children:(0,a.jsx)("span",{children:n.name})}),f>1&&(0,a.jsx)(p,{}),(0,a.jsxs)("div",{className:"search-container",children:[(0,a.jsx)(c,{setFilter:r,clearFilter:h,filterText:l,placeholder:"Search highlights..."}),!s&&void 0!==n.bookmark&&null!==n.bookmark&&(0,a.jsx)("div",{className:"kc-bookmark-btn-container",children:(0,a.jsx)("button",{className:"kc-bookmark-btn",onClick:function(){var e=n.clippings.find((function(e){return e._id===n.bookmark}));k(e.index),setTimeout((function(){T.current.scrollIntoView({behavior:"smooth",block:"start"})}),100)},children:(0,a.jsx)("i",{className:"fas fa-bookmark",children:" "})})})]}),(0,a.jsx)("div",{className:"cards-container",children:Z}),f>1&&(0,a.jsx)(p,{})]})},v=function(e){var n=e.closeMenu,s=e.isMenuOpen,i=(0,o.ZP)(),l=i.titles,d=i.filteredTitles,h=i.filterTitlesText,u=i.setTitlesFilter,x=i.clearTitlesFilter,m=i.selectedTitle,f=i.setSelectedTitle,g=i.clearClippingsFilter,p=null;(0,t.useEffect)((function(){s&&null!==p&&v(p)}),[s]);var j=d||l,v=function(e){e.scrollIntoView({block:"start"})};return(0,a.jsxs)("div",{className:"sidenav shadow-sm",children:[(0,a.jsx)("div",{className:"close-btn-container",children:(0,a.jsx)("button",{className:"sidenav-btn-close",onClick:n,children:(0,a.jsx)("i",{className:"fas fa-times"})})}),(0,a.jsx)("div",{className:"sidenav-search-container",children:(0,a.jsx)(c,{setFilter:u,clearFilter:x,filterText:h,placeholder:"Search titles..."})}),(0,a.jsx)("div",{className:"sidenav-titles-container ballo-font",children:j&&j.map((function(e){return(0,a.jsxs)("a",{href:"#!",onClick:function(){return n=e._id,g(),void f(n);var n},className:m===e?"sidenav-title-item selected":"sidenav-title-item",ref:function(n){m===e&&(p=n)},children:[h?(0,a.jsx)(r(),{highlightClassName:"search-highlight",searchWords:[h],autoEscape:!0,textToHighlight:e.name}):e.name," ","[",e.clippings.length,"]"]},e._id)}))})]})},k=s(8328),b=function(){var e=(0,t.useState)({message:"",open:!1}),n=(0,i.Z)(e,2),s=n[0],c=n[1],l=(0,o.ZP)(),r=l.selectedTitle,d=l.selectedClipping,h=l.clearSelectedClipping,u=l.updateLocalStorageTitles,x=function(){h()},m=function(e){c({message:e,open:!0}),setTimeout((function(){c({open:!1})}),2e3)};return d?(0,a.jsxs)(t.Fragment,{children:[s.open&&(0,a.jsx)(k.Z,{onClose:function(){return c(!1)},className:"modal-copied-toast",animation:!0,children:(0,a.jsx)(k.Z.Body,{children:s.message})}),(0,a.jsx)("div",{className:"kc-modal-container show-modal",onClick:x}),(0,a.jsxs)("div",{className:"kc-modal shadow-sm",children:[(0,a.jsxs)("div",{className:"kc-modal-header",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Title:"})," ",r.name]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",d.date]})})]}),(0,a.jsx)("div",{className:"kc-modal-body",children:(0,a.jsx)("p",{children:d.body})}),(0,a.jsxs)("div",{className:"kc-modal-footer",children:[(0,a.jsx)("a",{href:"#!",onClick:r.bookmark===d._id?function(){r.bookmark=null,u(),m("The bookmark has been removed!")}:function(){r.bookmark=d._id,u(),m("The bookmark has been set on this highligt!")},children:(0,a.jsx)("i",{className:r.bookmark===d._id?"fas fa-bookmark kc-txt-accent":"fas fa-bookmark",style:{fontSize:"1.5rem"}})}),(0,a.jsx)("a",{href:"#!",onClick:function(){var e='"'.concat(d.body,'"\r\n\u2015 ').concat(r.name);navigator.clipboard.writeText(e),m("The highlight has been copied to the clipboard!")},children:"COPY WITH TITLE"}),(0,a.jsx)("a",{href:"#!",onClick:function(){navigator.clipboard.writeText(d.body),m("The highlight has been copied to the clipboard!")},children:"COPY"}),(0,a.jsx)("button",{className:"kc-close-btn",onClick:x,children:"CLOSE"})]})]})]}):(0,a.jsx)(t.Fragment,{})},N=s(2102),C=s(3849),I=s(1616),T=s(9540),y=t.lazy((function(){return s.e(667).then(s.bind(s,1667))})),Z={color:"var(--main-section-font-color)",fontSize:"1.3rem"},P={color:"var(--empty-placeholder-icon-color)",fontSize:"3rem"},w=function(){return(0,a.jsxs)(N.Z,{className:"my-5",children:[(0,a.jsx)(C.Z,{className:"justify-content-center",style:P,children:(0,a.jsx)("i",{className:"fas fa-sticky-note"})}),(0,a.jsx)(C.Z,{className:"justify-content-center my-3 mx-1",style:Z,children:(0,a.jsx)("h3",{children:"Clippings File Is Not Loaded"})}),(0,a.jsx)(C.Z,{className:"justify-content-center mx-3 mt-3",style:Z,children:(0,a.jsx)(I.Z,{children:(0,a.jsxs)("p",{children:["It seems that your"," ",(0,a.jsx)("span",{className:"kc-txt-accent",children:"My Clippings.txt"})," hasn't been loaded yet. You can load it directly using buttons below or go to the ",(0,a.jsx)("a",{href:"./",children:"HOME"})," page for more instructions."]})})}),(0,a.jsx)(C.Z,{className:"justify-content-center",children:(0,a.jsx)(I.Z,{children:(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)(T.Z,{}),children:(0,a.jsx)(y,{alignement:"center"})})})})]})},S=function(){var e=(0,o.ZP)(),n=e.isLoading,s=e.titles,c=e.selectedTitle,l=(0,t.useState)(!0),r=(0,i.Z)(l,2),d=r[0],h=r[1];(0,t.useEffect)((function(){c&&h(!1)}),[c]);var u=function(){h(!d)};return n?(0,a.jsx)("div",{className:"clippings-container",children:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)("img",{src:"".concat("/Kindle-Highlights","/spinner.gif"),style:{width:"100px",paddingTop:"50px"},alt:"Loading titles from clippings file."})})}):s?(0,a.jsxs)(t.Fragment,{children:[(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"highlights-page",children:[(0,a.jsx)("div",{className:d?"sidenav-container show shadow-sm":"sidenav-container hide shadow-sm",children:(0,a.jsx)(v,{isMenuOpen:d,closeMenu:u})}),(0,a.jsxs)("div",{className:d?"highlights-container shrinked":"highlights-container enlarged",children:[!d&&(0,a.jsx)("button",{className:"sidenav-toggle shadow-sm",onClick:u,children:(0,a.jsx)("i",{className:"fas fa-book"})}),(0,a.jsx)("div",{className:"hide-on-medium",children:(0,a.jsx)(f,{children:(0,a.jsx)(j,{toggleMenu:u})})})]})]})]}):(0,a.jsx)(w,{})}}}]);